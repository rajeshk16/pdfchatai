"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/ai-stream-experimental";
exports.ids = ["vendor-chunks/ai-stream-experimental"];
exports.modules = {

/***/ "(ssr)/./node_modules/ai-stream-experimental/react/dist/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/ai-stream-experimental/react/dist/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useChat: () => (/* binding */ useChat),\n/* harmony export */   useCompletion: () => (/* binding */ useCompletion)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! swr */ \"(ssr)/./node_modules/swr/core/dist/index.mjs\");\n/* harmony import */ var nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanoid/non-secure */ \"(ssr)/./node_modules/nanoid/non-secure/index.js\");\n/* __next_internal_client_entry_do_not_use__ useChat,useCompletion auto */ // react/use-chat.ts\n\n\n// shared/utils.ts\n\nvar nanoid = (0,nanoid_non_secure__WEBPACK_IMPORTED_MODULE_2__.customAlphabet)(\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\", 7);\nfunction createChunkDecoder(complex) {\n    const decoder = new TextDecoder();\n    if (!complex) {\n        return function(chunk) {\n            if (!chunk) return \"\";\n            return decoder.decode(chunk, {\n                stream: true\n            });\n        };\n    }\n    return function(chunk) {\n        const decoded = decoder.decode(chunk, {\n            stream: true\n        }).split(\"\\n\");\n        return decoded.map(getStreamStringTypeAndValue).filter(Boolean);\n    };\n}\nvar StreamStringPrefixes = {\n    text: 0,\n    function_call: 1,\n    data: 2\n};\nvar getStreamStringTypeAndValue = (line)=>{\n    const firstSeperatorIndex = line.indexOf(\":\");\n    const prefix = line.slice(0, firstSeperatorIndex);\n    const type = Object.keys(StreamStringPrefixes).find((key)=>StreamStringPrefixes[key] === Number(prefix));\n    const val = line.slice(firstSeperatorIndex + 1);\n    let parsedVal = val;\n    if (!val) {\n        return {\n            type,\n            value: \"\"\n        };\n    }\n    try {\n        parsedVal = JSON.parse(val);\n    } catch (e) {\n        console.error(\"Failed to parse JSON value:\", val);\n    }\n    return {\n        type,\n        value: parsedVal\n    };\n};\nvar COMPLEX_HEADER = \"X-Experimental-Stream-Data\";\n// react/use-chat.ts\nvar getStreamedResponse = async (api, chatRequest, mutate, mutateStreamData, existingData, extraMetadataRef, messagesRef, abortControllerRef, onFinish, onResponse, sendExtraMessageFields)=>{\n    var _a, _b;\n    const previousMessages = messagesRef.current;\n    mutate(chatRequest.messages, false);\n    const res = await fetch(api, {\n        method: \"POST\",\n        body: JSON.stringify({\n            messages: sendExtraMessageFields ? chatRequest.messages : chatRequest.messages.map(({ role, content, name, function_call })=>({\n                    role,\n                    content,\n                    ...name !== void 0 && {\n                        name\n                    },\n                    ...function_call !== void 0 && {\n                        function_call\n                    }\n                })),\n            ...extraMetadataRef.current.body,\n            ...(_a = chatRequest.options) == null ? void 0 : _a.body,\n            ...chatRequest.functions !== void 0 && {\n                functions: chatRequest.functions\n            },\n            ...chatRequest.function_call !== void 0 && {\n                function_call: chatRequest.function_call\n            }\n        }),\n        credentials: extraMetadataRef.current.credentials,\n        headers: {\n            ...extraMetadataRef.current.headers,\n            ...(_b = chatRequest.options) == null ? void 0 : _b.headers\n        },\n        ...abortControllerRef.current !== null && {\n            signal: abortControllerRef.current.signal\n        }\n    }).catch((err)=>{\n        mutate(previousMessages, false);\n        throw err;\n    });\n    if (onResponse) {\n        try {\n            await onResponse(res);\n        } catch (err) {\n            throw err;\n        }\n    }\n    if (!res.ok) {\n        mutate(previousMessages, false);\n        throw new Error(await res.text() || \"Failed to fetch the chat response.\");\n    }\n    if (!res.body) {\n        throw new Error(\"The response body is empty.\");\n    }\n    const isComplexMode = res.headers.get(COMPLEX_HEADER) === \"true\";\n    const createdAt = /* @__PURE__ */ new Date();\n    const reader = res.body.getReader();\n    const decode = createChunkDecoder(isComplexMode);\n    let responseMessages = [];\n    let streamedResponse = \"\";\n    const replyId = nanoid();\n    let responseMessage = {\n        id: replyId,\n        createdAt,\n        content: \"\",\n        role: \"assistant\"\n    };\n    let responseData = [];\n    const prefixMap = {};\n    if (isComplexMode) {\n        while(true){\n            const { done, value } = await reader.read();\n            if (done) {\n                break;\n            }\n            const lines = decode(value);\n            if (typeof lines === \"string\") {\n                throw new Error(\"Invalid response format. Complex mode was set but the response is a string. This should never happen.\");\n            }\n            for (const { type, value: value2 } of lines){\n                if (type === \"text\") {\n                    if (prefixMap[\"text\"]) {\n                        prefixMap[\"text\"] = {\n                            ...prefixMap[\"text\"],\n                            content: (prefixMap[\"text\"].content || \"\") + value2\n                        };\n                    } else {\n                        prefixMap[\"text\"] = {\n                            id: nanoid(),\n                            role: \"assistant\",\n                            content: value2,\n                            createdAt\n                        };\n                    }\n                }\n                if (type === \"function_call\") {\n                    prefixMap[\"function_call\"] = value2;\n                }\n                if (type === \"data\") {\n                    const parsedValue = JSON.parse(value2);\n                    if (prefixMap[\"data\"]) {\n                        prefixMap[\"data\"] = [\n                            ...prefixMap[\"data\"],\n                            ...parsedValue\n                        ];\n                    } else {\n                        prefixMap[\"data\"] = parsedValue;\n                    }\n                }\n                const data = prefixMap[\"data\"];\n                const responseMessage2 = prefixMap[\"text\"];\n                let functionCall = prefixMap[\"function_call\"];\n                let functionCallMessage = null;\n                if (functionCall) {\n                    const parsedFunctionCall = JSON.parse(functionCall).function_call;\n                    functionCallMessage = {\n                        id: nanoid(),\n                        role: \"function\",\n                        content: \"\",\n                        name: parsedFunctionCall.name,\n                        createdAt\n                    };\n                }\n                const merged = [\n                    functionCallMessage,\n                    responseMessage2\n                ].filter(Boolean);\n                mutate([\n                    ...chatRequest.messages,\n                    ...merged\n                ], false);\n                mutateStreamData([\n                    ...existingData || [],\n                    ...data || []\n                ]);\n                if (abortControllerRef.current === null) {\n                    reader.cancel();\n                    break;\n                }\n            }\n        }\n        for (const [type, item] of Object.entries(prefixMap)){\n            if (onFinish && type === \"text\") {\n                onFinish(item);\n            }\n            if (type === \"data\") {\n                responseData.push(item);\n            } else {\n                responseMessages.push(item);\n            }\n        }\n        return {\n            messages: responseMessages,\n            data: responseData\n        };\n    } else {\n        while(true){\n            const { done, value } = await reader.read();\n            if (done) {\n                break;\n            }\n            streamedResponse += decode(value);\n            if (streamedResponse.startsWith('{\"function_call\":')) {\n                responseMessage[\"function_call\"] = streamedResponse;\n            } else {\n                responseMessage[\"content\"] = streamedResponse;\n            }\n            mutate([\n                ...chatRequest.messages,\n                {\n                    ...responseMessage\n                }\n            ], false);\n            if (abortControllerRef.current === null) {\n                reader.cancel();\n                break;\n            }\n        }\n        if (streamedResponse.startsWith('{\"function_call\":')) {\n            const parsedFunctionCall = JSON.parse(streamedResponse).function_call;\n            responseMessage[\"function_call\"] = parsedFunctionCall;\n            mutate([\n                ...chatRequest.messages,\n                {\n                    ...responseMessage\n                }\n            ]);\n        }\n        if (onFinish) {\n            onFinish(responseMessage);\n        }\n        return responseMessage;\n    }\n};\nfunction useChat({ api = \"/api/chat\", id, initialMessages = [], initialInput = \"\", sendExtraMessageFields, experimental_onFunctionCall, onResponse, onFinish, onError, credentials, headers, body } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const chatId = id || hookId;\n    const { data: messages, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        api,\n        chatId\n    ], null, {\n        fallbackData: initialMessages\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatId,\n        \"loading\"\n    ], null);\n    const { data: streamData, mutate: mutateStreamData } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        chatId,\n        \"streamData\"\n    ], null);\n    const messagesRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(messages || []);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        messagesRef.current = messages || [];\n    }, [\n        messages\n    ]);\n    const abortControllerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)();\n    async function triggerRequest(chatRequest) {\n        try {\n            mutateLoading(true);\n            const abortController = new AbortController();\n            abortControllerRef.current = abortController;\n            while(true){\n                const messagesAndDataOrJustMessage = await getStreamedResponse(api, chatRequest, mutate, mutateStreamData, streamData, extraMetadataRef, messagesRef, abortControllerRef, onFinish, onResponse, sendExtraMessageFields);\n                if (\"messages\" in messagesAndDataOrJustMessage) {\n                    for (const message of messagesAndDataOrJustMessage.messages){\n                        if (message.function_call === void 0 || typeof message.function_call === \"string\") {\n                            break;\n                        }\n                        if (experimental_onFunctionCall) {\n                            const functionCall = message.function_call;\n                            const functionCallResponse = await experimental_onFunctionCall(messagesRef.current, functionCall);\n                            if (functionCallResponse === void 0) break;\n                            chatRequest = functionCallResponse;\n                        }\n                    }\n                } else {\n                    const streamedResponseMessage = messagesAndDataOrJustMessage;\n                    if (streamedResponseMessage.function_call === void 0 || typeof streamedResponseMessage.function_call === \"string\") {\n                        break;\n                    }\n                    if (experimental_onFunctionCall) {\n                        const functionCall = streamedResponseMessage.function_call;\n                        const functionCallResponse = await experimental_onFunctionCall(messagesRef.current, functionCall);\n                        if (functionCallResponse === void 0) break;\n                        chatRequest = functionCallResponse;\n                    }\n                }\n                abortControllerRef.current = null;\n                return null;\n            }\n        } catch (err) {\n            if (err.name === \"AbortError\") {\n                abortControllerRef.current = null;\n                return null;\n            }\n            if (onError && err instanceof Error) {\n                onError(err);\n            }\n            setError(err);\n        } finally{\n            mutateLoading(false);\n        }\n    }\n    const append = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (message, { options, functions, function_call } = {})=>{\n        if (!message.id) {\n            message.id = nanoid();\n        }\n        const chatRequest = {\n            messages: messagesRef.current.concat(message),\n            options,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest\n    ]);\n    const reload = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ({ options, functions, function_call } = {})=>{\n        if (messagesRef.current.length === 0) return null;\n        const lastMessage = messagesRef.current[messagesRef.current.length - 1];\n        if (lastMessage.role === \"assistant\") {\n            const chatRequest2 = {\n                messages: messagesRef.current.slice(0, -1),\n                options,\n                ...functions !== void 0 && {\n                    functions\n                },\n                ...function_call !== void 0 && {\n                    function_call\n                }\n            };\n            return triggerRequest(chatRequest2);\n        }\n        const chatRequest = {\n            messages: messagesRef.current,\n            options,\n            ...functions !== void 0 && {\n                functions\n            },\n            ...function_call !== void 0 && {\n                function_call\n            }\n        };\n        return triggerRequest(chatRequest);\n    }, [\n        triggerRequest\n    ]);\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortControllerRef.current) {\n            abortControllerRef.current.abort();\n            abortControllerRef.current = null;\n        }\n    }, []);\n    const setMessages = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((messages2)=>{\n        mutate(messages2, false);\n        messagesRef.current = messages2;\n    }, [\n        mutate\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e, { options, functions, function_call } = {}, metadata)=>{\n        if (metadata) {\n            extraMetadataRef.current = {\n                ...extraMetadataRef.current,\n                ...metadata\n            };\n        }\n        e.preventDefault();\n        if (!input) return;\n        append({\n            content: input,\n            role: \"user\",\n            createdAt: /* @__PURE__ */ new Date()\n        }, {\n            options,\n            functions,\n            function_call\n        });\n        setInput(\"\");\n    }, [\n        input,\n        append\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        messages: messages || [],\n        error,\n        append,\n        reload,\n        stop,\n        setMessages,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading,\n        data: streamData\n    };\n}\n// react/use-completion.ts\n\n\nfunction useCompletion({ api = \"/api/completion\", id, initialCompletion = \"\", initialInput = \"\", credentials, headers, body, onResponse, onFinish, onError } = {}) {\n    const hookId = (0,react__WEBPACK_IMPORTED_MODULE_0__.useId)();\n    const completionId = id || hookId;\n    const { data, mutate } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        api,\n        completionId\n    ], null, {\n        fallbackData: initialCompletion\n    });\n    const { data: isLoading = false, mutate: mutateLoading } = (0,swr__WEBPACK_IMPORTED_MODULE_1__[\"default\"])([\n        completionId,\n        \"loading\"\n    ], null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0);\n    const completion = data;\n    const [abortController, setAbortController] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const extraMetadataRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)({\n        credentials,\n        headers,\n        body\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        extraMetadataRef.current = {\n            credentials,\n            headers,\n            body\n        };\n    }, [\n        credentials,\n        headers,\n        body\n    ]);\n    async function triggerRequest(prompt, options) {\n        try {\n            mutateLoading(true);\n            const abortController2 = new AbortController();\n            setAbortController(abortController2);\n            mutate(\"\", false);\n            const res = await fetch(api, {\n                method: \"POST\",\n                body: JSON.stringify({\n                    prompt,\n                    ...extraMetadataRef.current.body,\n                    ...options == null ? void 0 : options.body\n                }),\n                credentials: extraMetadataRef.current.credentials,\n                headers: {\n                    ...extraMetadataRef.current.headers,\n                    ...options == null ? void 0 : options.headers\n                },\n                signal: abortController2.signal\n            }).catch((err)=>{\n                throw err;\n            });\n            if (onResponse) {\n                try {\n                    await onResponse(res);\n                } catch (err) {\n                    throw err;\n                }\n            }\n            if (!res.ok) {\n                throw new Error(await res.text() || \"Failed to fetch the chat response.\");\n            }\n            if (!res.body) {\n                throw new Error(\"The response body is empty.\");\n            }\n            let result = \"\";\n            const reader = res.body.getReader();\n            const decoder = createChunkDecoder();\n            while(true){\n                const { done, value } = await reader.read();\n                if (done) {\n                    break;\n                }\n                result += decoder(value);\n                mutate(result, false);\n                if (abortController2 === null) {\n                    reader.cancel();\n                    break;\n                }\n            }\n            if (onFinish) {\n                onFinish(prompt, result);\n            }\n            setAbortController(null);\n            return result;\n        } catch (err) {\n            if (err.name === \"AbortError\") {\n                setAbortController(null);\n                return null;\n            }\n            if (err instanceof Error) {\n                if (onError) {\n                    onError(err);\n                }\n            }\n            setError(err);\n        } finally{\n            mutateLoading(false);\n        }\n    }\n    const stop = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (abortController) {\n            abortController.abort();\n            setAbortController(null);\n        }\n    }, [\n        abortController\n    ]);\n    const setCompletion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((completion2)=>{\n        mutate(completion2, false);\n    }, [\n        mutate\n    ]);\n    const complete = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (prompt, options)=>{\n        return triggerRequest(prompt, options);\n    }, [\n        triggerRequest\n    ]);\n    const [input, setInput] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(initialInput);\n    const handleSubmit = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((e)=>{\n        e.preventDefault();\n        if (!input) return;\n        return complete(input);\n    }, [\n        input,\n        complete\n    ]);\n    const handleInputChange = (e)=>{\n        setInput(e.target.value);\n    };\n    return {\n        completion,\n        complete,\n        error,\n        setCompletion,\n        stop,\n        input,\n        setInput,\n        handleInputChange,\n        handleSubmit,\n        isLoading\n    };\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvYWktc3RyZWFtLWV4cGVyaW1lbnRhbC9yZWFjdC9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OzsyRUFFQSxvQkFBb0I7QUFDb0Q7QUFDL0M7QUFFekIsa0JBQWtCO0FBQ2lDO0FBQ25ELElBQUlPLFNBQVNELGlFQUFjQSxDQUN6QixrRUFDQTtBQUVGLFNBQVNFLG1CQUFtQkMsT0FBTztJQUNqQyxNQUFNQyxVQUFVLElBQUlDO0lBQ3BCLElBQUksQ0FBQ0YsU0FBUztRQUNaLE9BQU8sU0FBU0csS0FBSztZQUNuQixJQUFJLENBQUNBLE9BQ0gsT0FBTztZQUNULE9BQU9GLFFBQVFHLE1BQU0sQ0FBQ0QsT0FBTztnQkFBRUUsUUFBUTtZQUFLO1FBQzlDO0lBQ0Y7SUFDQSxPQUFPLFNBQVNGLEtBQUs7UUFDbkIsTUFBTUcsVUFBVUwsUUFBUUcsTUFBTSxDQUFDRCxPQUFPO1lBQUVFLFFBQVE7UUFBSyxHQUFHRSxLQUFLLENBQUM7UUFDOUQsT0FBT0QsUUFBUUUsR0FBRyxDQUFDQyw2QkFBNkJDLE1BQU0sQ0FBQ0M7SUFDekQ7QUFDRjtBQUNBLElBQUlDLHVCQUF1QjtJQUN6QkMsTUFBTTtJQUNOQyxlQUFlO0lBQ2ZDLE1BQU07QUFFUjtBQUNBLElBQUlOLDhCQUE4QixDQUFDTztJQUNqQyxNQUFNQyxzQkFBc0JELEtBQUtFLE9BQU8sQ0FBQztJQUN6QyxNQUFNQyxTQUFTSCxLQUFLSSxLQUFLLENBQUMsR0FBR0g7SUFDN0IsTUFBTUksT0FBT0MsT0FBT0MsSUFBSSxDQUFDWCxzQkFBc0JZLElBQUksQ0FDakQsQ0FBQ0MsTUFBUWIsb0JBQW9CLENBQUNhLElBQUksS0FBS0MsT0FBT1A7SUFFaEQsTUFBTVEsTUFBTVgsS0FBS0ksS0FBSyxDQUFDSCxzQkFBc0I7SUFDN0MsSUFBSVcsWUFBWUQ7SUFDaEIsSUFBSSxDQUFDQSxLQUFLO1FBQ1IsT0FBTztZQUFFTjtZQUFNUSxPQUFPO1FBQUc7SUFDM0I7SUFDQSxJQUFJ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QUFPO2dCQUN4QixJQUFJaUMsU0FBUztvQkFDWEEsUUFBUW5DO2dCQUNWO1lBQ0Y7WUFDQTBDLFNBQVMxQztRQUNYLFNBQVU7WUFDUndDLGNBQWM7UUFDaEI7SUFDRjtJQUNBLE1BQU1nQixPQUFPVyxrREFBWUEsQ0FBQztRQUN4QixJQUFJdkIsaUJBQWlCO1lBQ25CQSxnQkFBZ0JhLEtBQUs7WUFDckJvQixtQkFBbUI7UUFDckI7SUFDRixHQUFHO1FBQUNqQztLQUFnQjtJQUNwQixNQUFNcUMsZ0JBQWdCZCxrREFBWUEsQ0FDaEMsQ0FBQ2U7UUFDQzlHLE9BQU84RyxhQUFhO0lBQ3RCLEdBQ0E7UUFBQzlHO0tBQU87SUFFVixNQUFNK0csV0FBV2hCLGtEQUFZQSxDQUMzQixPQUFPVyxRQUFRcEY7UUFDYixPQUFPaUQsZUFBZW1DLFFBQVFwRjtJQUNoQyxHQUNBO1FBQUNpRDtLQUFlO0lBRWxCLE1BQU0sQ0FBQ2lCLE9BQU9DLFNBQVMsR0FBR1UsK0NBQVNBLENBQUN0QztJQUNwQyxNQUFNNkIsZUFBZUssa0RBQVlBLENBQy9CLENBQUN0RztRQUNDQSxFQUFFbUcsY0FBYztRQUNoQixJQUFJLENBQUNKLE9BQ0g7UUFDRixPQUFPdUIsU0FBU3ZCO0lBQ2xCLEdBQ0E7UUFBQ0E7UUFBT3VCO0tBQVM7SUFFbkIsTUFBTWxCLG9CQUFvQixDQUFDcEc7UUFDekJnRyxTQUFTaEcsRUFBRXFHLE1BQU0sQ0FBQ3hHLEtBQUs7SUFDekI7SUFDQSxPQUFPO1FBQ0xrSDtRQUNBTztRQUNBcEg7UUFDQWtIO1FBQ0F6QjtRQUNBSTtRQUNBQztRQUNBSTtRQUNBSDtRQUNBdkI7SUFDRjtBQUNGO0FBSUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9sYW5nY2hhaW4tdGV4dC1haS8uL25vZGVfbW9kdWxlcy9haS1zdHJlYW0tZXhwZXJpbWVudGFsL3JlYWN0L2Rpc3QvaW5kZXgubWpzPzMyZDQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBjbGllbnQnXG5cbi8vIHJlYWN0L3VzZS1jaGF0LnRzXG5pbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VJZCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHVzZVNXUiBmcm9tIFwic3dyXCI7XG5cbi8vIHNoYXJlZC91dGlscy50c1xuaW1wb3J0IHsgY3VzdG9tQWxwaGFiZXQgfSBmcm9tIFwibmFub2lkL25vbi1zZWN1cmVcIjtcbnZhciBuYW5vaWQgPSBjdXN0b21BbHBoYWJldChcbiAgXCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLFxuICA3XG4pO1xuZnVuY3Rpb24gY3JlYXRlQ2h1bmtEZWNvZGVyKGNvbXBsZXgpIHtcbiAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpO1xuICBpZiAoIWNvbXBsZXgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oY2h1bmspIHtcbiAgICAgIGlmICghY2h1bmspXG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgcmV0dXJuIGRlY29kZXIuZGVjb2RlKGNodW5rLCB7IHN0cmVhbTogdHJ1ZSB9KTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbihjaHVuaykge1xuICAgIGNvbnN0IGRlY29kZWQgPSBkZWNvZGVyLmRlY29kZShjaHVuaywgeyBzdHJlYW06IHRydWUgfSkuc3BsaXQoXCJcXG5cIik7XG4gICAgcmV0dXJuIGRlY29kZWQubWFwKGdldFN0cmVhbVN0cmluZ1R5cGVBbmRWYWx1ZSkuZmlsdGVyKEJvb2xlYW4pO1xuICB9O1xufVxudmFyIFN0cmVhbVN0cmluZ1ByZWZpeGVzID0ge1xuICB0ZXh0OiAwLFxuICBmdW5jdGlvbl9jYWxsOiAxLFxuICBkYXRhOiAyXG4gIC8vIHVzZXJfZXJyOiAzP1xufTtcbnZhciBnZXRTdHJlYW1TdHJpbmdUeXBlQW5kVmFsdWUgPSAobGluZSkgPT4ge1xuICBjb25zdCBmaXJzdFNlcGVyYXRvckluZGV4ID0gbGluZS5pbmRleE9mKFwiOlwiKTtcbiAgY29uc3QgcHJlZml4ID0gbGluZS5zbGljZSgwLCBmaXJzdFNlcGVyYXRvckluZGV4KTtcbiAgY29uc3QgdHlwZSA9IE9iamVjdC5rZXlzKFN0cmVhbVN0cmluZ1ByZWZpeGVzKS5maW5kKFxuICAgIChrZXkpID0+IFN0cmVhbVN0cmluZ1ByZWZpeGVzW2tleV0gPT09IE51bWJlcihwcmVmaXgpXG4gICk7XG4gIGNvbnN0IHZhbCA9IGxpbmUuc2xpY2UoZmlyc3RTZXBlcmF0b3JJbmRleCArIDEpO1xuICBsZXQgcGFyc2VkVmFsID0gdmFsO1xuICBpZiAoIXZhbCkge1xuICAgIHJldHVybiB7IHR5cGUsIHZhbHVlOiBcIlwiIH07XG4gIH1cbiAgdHJ5IHtcbiAgICBwYXJzZWRWYWwgPSBKU09OLnBhcnNlKHZhbCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIEpTT04gdmFsdWU6XCIsIHZhbCk7XG4gIH1cbiAgcmV0dXJuIHsgdHlwZSwgdmFsdWU6IHBhcnNlZFZhbCB9O1xufTtcbnZhciBDT01QTEVYX0hFQURFUiA9IFwiWC1FeHBlcmltZW50YWwtU3RyZWFtLURhdGFcIjtcblxuLy8gcmVhY3QvdXNlLWNoYXQudHNcbnZhciBnZXRTdHJlYW1lZFJlc3BvbnNlID0gYXN5bmMgKGFwaSwgY2hhdFJlcXVlc3QsIG11dGF0ZSwgbXV0YXRlU3RyZWFtRGF0YSwgZXhpc3RpbmdEYXRhLCBleHRyYU1ldGFkYXRhUmVmLCBtZXNzYWdlc1JlZiwgYWJvcnRDb250cm9sbGVyUmVmLCBvbkZpbmlzaCwgb25SZXNwb25zZSwgc2VuZEV4dHJhTWVzc2FnZUZpZWxkcykgPT4ge1xuICB2YXIgX2EsIF9iO1xuICBjb25zdCBwcmV2aW91c01lc3NhZ2VzID0gbWVzc2FnZXNSZWYuY3VycmVudDtcbiAgbXV0YXRlKGNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCBmYWxzZSk7XG4gIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGFwaSwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgbWVzc2FnZXM6IHNlbmRFeHRyYU1lc3NhZ2VGaWVsZHMgPyBjaGF0UmVxdWVzdC5tZXNzYWdlcyA6IGNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLm1hcChcbiAgICAgICAgKHsgcm9sZSwgY29udGVudCwgbmFtZSwgZnVuY3Rpb25fY2FsbCB9KSA9PiAoe1xuICAgICAgICAgIHJvbGUsXG4gICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAuLi5uYW1lICE9PSB2b2lkIDAgJiYgeyBuYW1lIH0sXG4gICAgICAgICAgLi4uZnVuY3Rpb25fY2FsbCAhPT0gdm9pZCAwICYmIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uX2NhbGxcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApLFxuICAgICAgLi4uZXh0cmFNZXRhZGF0YVJlZi5jdXJyZW50LmJvZHksXG4gICAgICAuLi4oX2EgPSBjaGF0UmVxdWVzdC5vcHRpb25zKSA9PSBudWxsID8gdm9pZCAwIDogX2EuYm9keSxcbiAgICAgIC4uLmNoYXRSZXF1ZXN0LmZ1bmN0aW9ucyAhPT0gdm9pZCAwICYmIHtcbiAgICAgICAgZnVuY3Rpb25zOiBjaGF0UmVxdWVzdC5mdW5jdGlvbnNcbiAgICAgIH0sXG4gICAgICAuLi5jaGF0UmVxdWVzdC5mdW5jdGlvbl9jYWxsICE9PSB2b2lkIDAgJiYge1xuICAgICAgICBmdW5jdGlvbl9jYWxsOiBjaGF0UmVxdWVzdC5mdW5jdGlvbl9jYWxsXG4gICAgICB9XG4gICAgfSksXG4gICAgY3JlZGVudGlhbHM6IGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5jcmVkZW50aWFscyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQuaGVhZGVycyxcbiAgICAgIC4uLihfYiA9IGNoYXRSZXF1ZXN0Lm9wdGlvbnMpID09IG51bGwgPyB2b2lkIDAgOiBfYi5oZWFkZXJzXG4gICAgfSxcbiAgICAuLi5hYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCAhPT0gbnVsbCAmJiB7XG4gICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50LnNpZ25hbFxuICAgIH1cbiAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgIG11dGF0ZShwcmV2aW91c01lc3NhZ2VzLCBmYWxzZSk7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcbiAgaWYgKG9uUmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgb25SZXNwb25zZShyZXMpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgfVxuICBpZiAoIXJlcy5vaykge1xuICAgIG11dGF0ZShwcmV2aW91c01lc3NhZ2VzLCBmYWxzZSk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGF3YWl0IHJlcy50ZXh0KCkgfHwgXCJGYWlsZWQgdG8gZmV0Y2ggdGhlIGNoYXQgcmVzcG9uc2UuXCIpO1xuICB9XG4gIGlmICghcmVzLmJvZHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgcmVzcG9uc2UgYm9keSBpcyBlbXB0eS5cIik7XG4gIH1cbiAgY29uc3QgaXNDb21wbGV4TW9kZSA9IHJlcy5oZWFkZXJzLmdldChDT01QTEVYX0hFQURFUikgPT09IFwidHJ1ZVwiO1xuICBjb25zdCBjcmVhdGVkQXQgPSAvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKTtcbiAgY29uc3QgcmVhZGVyID0gcmVzLmJvZHkuZ2V0UmVhZGVyKCk7XG4gIGNvbnN0IGRlY29kZSA9IGNyZWF0ZUNodW5rRGVjb2Rlcihpc0NvbXBsZXhNb2RlKTtcbiAgbGV0IHJlc3BvbnNlTWVzc2FnZXMgPSBbXTtcbiAgbGV0IHN0cmVhbWVkUmVzcG9uc2UgPSBcIlwiO1xuICBjb25zdCByZXBseUlkID0gbmFub2lkKCk7XG4gIGxldCByZXNwb25zZU1lc3NhZ2UgPSB7XG4gICAgaWQ6IHJlcGx5SWQsXG4gICAgY3JlYXRlZEF0LFxuICAgIGNvbnRlbnQ6IFwiXCIsXG4gICAgcm9sZTogXCJhc3Npc3RhbnRcIlxuICB9O1xuICBsZXQgcmVzcG9uc2VEYXRhID0gW107XG4gIGNvbnN0IHByZWZpeE1hcCA9IHt9O1xuICBpZiAoaXNDb21wbGV4TW9kZSkge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjb25zdCBsaW5lcyA9IGRlY29kZSh2YWx1ZSk7XG4gICAgICBpZiAodHlwZW9mIGxpbmVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkludmFsaWQgcmVzcG9uc2UgZm9ybWF0LiBDb21wbGV4IG1vZGUgd2FzIHNldCBidXQgdGhlIHJlc3BvbnNlIGlzIGEgc3RyaW5nLiBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4uXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgeyB0eXBlLCB2YWx1ZTogdmFsdWUyIH0gb2YgbGluZXMpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgICAgaWYgKHByZWZpeE1hcFtcInRleHRcIl0pIHtcbiAgICAgICAgICAgIHByZWZpeE1hcFtcInRleHRcIl0gPSB7XG4gICAgICAgICAgICAgIC4uLnByZWZpeE1hcFtcInRleHRcIl0sXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IChwcmVmaXhNYXBbXCJ0ZXh0XCJdLmNvbnRlbnQgfHwgXCJcIikgKyB2YWx1ZTJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZWZpeE1hcFtcInRleHRcIl0gPSB7XG4gICAgICAgICAgICAgIGlkOiBuYW5vaWQoKSxcbiAgICAgICAgICAgICAgcm9sZTogXCJhc3Npc3RhbnRcIixcbiAgICAgICAgICAgICAgY29udGVudDogdmFsdWUyLFxuICAgICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSBcImZ1bmN0aW9uX2NhbGxcIikge1xuICAgICAgICAgIHByZWZpeE1hcFtcImZ1bmN0aW9uX2NhbGxcIl0gPSB2YWx1ZTI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09IFwiZGF0YVwiKSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkVmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlMik7XG4gICAgICAgICAgaWYgKHByZWZpeE1hcFtcImRhdGFcIl0pIHtcbiAgICAgICAgICAgIHByZWZpeE1hcFtcImRhdGFcIl0gPSBbLi4ucHJlZml4TWFwW1wiZGF0YVwiXSwgLi4ucGFyc2VkVmFsdWVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVmaXhNYXBbXCJkYXRhXCJdID0gcGFyc2VkVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBwcmVmaXhNYXBbXCJkYXRhXCJdO1xuICAgICAgICBjb25zdCByZXNwb25zZU1lc3NhZ2UyID0gcHJlZml4TWFwW1widGV4dFwiXTtcbiAgICAgICAgbGV0IGZ1bmN0aW9uQ2FsbCA9IHByZWZpeE1hcFtcImZ1bmN0aW9uX2NhbGxcIl07XG4gICAgICAgIGxldCBmdW5jdGlvbkNhbGxNZXNzYWdlID0gbnVsbDtcbiAgICAgICAgaWYgKGZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgIGNvbnN0IHBhcnNlZEZ1bmN0aW9uQ2FsbCA9IEpTT04ucGFyc2UoZnVuY3Rpb25DYWxsKS5mdW5jdGlvbl9jYWxsO1xuICAgICAgICAgIGZ1bmN0aW9uQ2FsbE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICBpZDogbmFub2lkKCksXG4gICAgICAgICAgICByb2xlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgICBjb250ZW50OiBcIlwiLFxuICAgICAgICAgICAgbmFtZTogcGFyc2VkRnVuY3Rpb25DYWxsLm5hbWUsXG4gICAgICAgICAgICBjcmVhdGVkQXRcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IFtmdW5jdGlvbkNhbGxNZXNzYWdlLCByZXNwb25zZU1lc3NhZ2UyXS5maWx0ZXIoXG4gICAgICAgICAgQm9vbGVhblxuICAgICAgICApO1xuICAgICAgICBtdXRhdGUoWy4uLmNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCAuLi5tZXJnZWRdLCBmYWxzZSk7XG4gICAgICAgIG11dGF0ZVN0cmVhbURhdGEoWy4uLmV4aXN0aW5nRGF0YSB8fCBbXSwgLi4uZGF0YSB8fCBbXV0pO1xuICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICByZWFkZXIuY2FuY2VsKCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBbdHlwZSwgaXRlbV0gb2YgT2JqZWN0LmVudHJpZXMocHJlZml4TWFwKSkge1xuICAgICAgaWYgKG9uRmluaXNoICYmIHR5cGUgPT09IFwidGV4dFwiKSB7XG4gICAgICAgIG9uRmluaXNoKGl0ZW0pO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGUgPT09IFwiZGF0YVwiKSB7XG4gICAgICAgIHJlc3BvbnNlRGF0YS5wdXNoKGl0ZW0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzcG9uc2VNZXNzYWdlcy5wdXNoKGl0ZW0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geyBtZXNzYWdlczogcmVzcG9uc2VNZXNzYWdlcywgZGF0YTogcmVzcG9uc2VEYXRhIH07XG4gIH0gZWxzZSB7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICBpZiAoZG9uZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0cmVhbWVkUmVzcG9uc2UgKz0gZGVjb2RlKHZhbHVlKTtcbiAgICAgIGlmIChzdHJlYW1lZFJlc3BvbnNlLnN0YXJ0c1dpdGgoJ3tcImZ1bmN0aW9uX2NhbGxcIjonKSkge1xuICAgICAgICByZXNwb25zZU1lc3NhZ2VbXCJmdW5jdGlvbl9jYWxsXCJdID0gc3RyZWFtZWRSZXNwb25zZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3BvbnNlTWVzc2FnZVtcImNvbnRlbnRcIl0gPSBzdHJlYW1lZFJlc3BvbnNlO1xuICAgICAgfVxuICAgICAgbXV0YXRlKFsuLi5jaGF0UmVxdWVzdC5tZXNzYWdlcywgeyAuLi5yZXNwb25zZU1lc3NhZ2UgfV0sIGZhbHNlKTtcbiAgICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCA9PT0gbnVsbCkge1xuICAgICAgICByZWFkZXIuY2FuY2VsKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3RyZWFtZWRSZXNwb25zZS5zdGFydHNXaXRoKCd7XCJmdW5jdGlvbl9jYWxsXCI6JykpIHtcbiAgICAgIGNvbnN0IHBhcnNlZEZ1bmN0aW9uQ2FsbCA9IEpTT04ucGFyc2Uoc3RyZWFtZWRSZXNwb25zZSkuZnVuY3Rpb25fY2FsbDtcbiAgICAgIHJlc3BvbnNlTWVzc2FnZVtcImZ1bmN0aW9uX2NhbGxcIl0gPSBwYXJzZWRGdW5jdGlvbkNhbGw7XG4gICAgICBtdXRhdGUoWy4uLmNoYXRSZXF1ZXN0Lm1lc3NhZ2VzLCB7IC4uLnJlc3BvbnNlTWVzc2FnZSB9XSk7XG4gICAgfVxuICAgIGlmIChvbkZpbmlzaCkge1xuICAgICAgb25GaW5pc2gocmVzcG9uc2VNZXNzYWdlKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlTWVzc2FnZTtcbiAgfVxufTtcbmZ1bmN0aW9uIHVzZUNoYXQoe1xuICBhcGkgPSBcIi9hcGkvY2hhdFwiLFxuICBpZCxcbiAgaW5pdGlhbE1lc3NhZ2VzID0gW10sXG4gIGluaXRpYWxJbnB1dCA9IFwiXCIsXG4gIHNlbmRFeHRyYU1lc3NhZ2VGaWVsZHMsXG4gIGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCxcbiAgb25SZXNwb25zZSxcbiAgb25GaW5pc2gsXG4gIG9uRXJyb3IsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5XG59ID0ge30pIHtcbiAgY29uc3QgaG9va0lkID0gdXNlSWQoKTtcbiAgY29uc3QgY2hhdElkID0gaWQgfHwgaG9va0lkO1xuICBjb25zdCB7IGRhdGE6IG1lc3NhZ2VzLCBtdXRhdGUgfSA9IHVzZVNXUihbYXBpLCBjaGF0SWRdLCBudWxsLCB7XG4gICAgZmFsbGJhY2tEYXRhOiBpbml0aWFsTWVzc2FnZXNcbiAgfSk7XG4gIGNvbnN0IHsgZGF0YTogaXNMb2FkaW5nID0gZmFsc2UsIG11dGF0ZTogbXV0YXRlTG9hZGluZyB9ID0gdXNlU1dSKFxuICAgIFtjaGF0SWQsIFwibG9hZGluZ1wiXSxcbiAgICBudWxsXG4gICk7XG4gIGNvbnN0IHsgZGF0YTogc3RyZWFtRGF0YSwgbXV0YXRlOiBtdXRhdGVTdHJlYW1EYXRhIH0gPSB1c2VTV1IoXG4gICAgW2NoYXRJZCwgXCJzdHJlYW1EYXRhXCJdLFxuICAgIG51bGxcbiAgKTtcbiAgY29uc3QgbWVzc2FnZXNSZWYgPSB1c2VSZWYobWVzc2FnZXMgfHwgW10pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIG1lc3NhZ2VzUmVmLmN1cnJlbnQgPSBtZXNzYWdlcyB8fCBbXTtcbiAgfSwgW21lc3NhZ2VzXSk7XG4gIGNvbnN0IGFib3J0Q29udHJvbGxlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgZXh0cmFNZXRhZGF0YVJlZiA9IHVzZVJlZih7XG4gICAgY3JlZGVudGlhbHMsXG4gICAgaGVhZGVycyxcbiAgICBib2R5XG4gIH0pO1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgIGNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHlcbiAgICB9O1xuICB9LCBbY3JlZGVudGlhbHMsIGhlYWRlcnMsIGJvZHldKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZSgpO1xuICBhc3luYyBmdW5jdGlvbiB0cmlnZ2VyUmVxdWVzdChjaGF0UmVxdWVzdCkge1xuICAgIHRyeSB7XG4gICAgICBtdXRhdGVMb2FkaW5nKHRydWUpO1xuICAgICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgPSBhYm9ydENvbnRyb2xsZXI7XG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjb25zdCBtZXNzYWdlc0FuZERhdGFPckp1c3RNZXNzYWdlID0gYXdhaXQgZ2V0U3RyZWFtZWRSZXNwb25zZShcbiAgICAgICAgICBhcGksXG4gICAgICAgICAgY2hhdFJlcXVlc3QsXG4gICAgICAgICAgbXV0YXRlLFxuICAgICAgICAgIG11dGF0ZVN0cmVhbURhdGEsXG4gICAgICAgICAgc3RyZWFtRGF0YSxcbiAgICAgICAgICBleHRyYU1ldGFkYXRhUmVmLFxuICAgICAgICAgIG1lc3NhZ2VzUmVmLFxuICAgICAgICAgIGFib3J0Q29udHJvbGxlclJlZixcbiAgICAgICAgICBvbkZpbmlzaCxcbiAgICAgICAgICBvblJlc3BvbnNlLFxuICAgICAgICAgIHNlbmRFeHRyYU1lc3NhZ2VGaWVsZHNcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKFwibWVzc2FnZXNcIiBpbiBtZXNzYWdlc0FuZERhdGFPckp1c3RNZXNzYWdlKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2UubWVzc2FnZXMpIHtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlLmZ1bmN0aW9uX2NhbGwgPT09IHZvaWQgMCB8fCB0eXBlb2YgbWVzc2FnZS5mdW5jdGlvbl9jYWxsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGwgPSBtZXNzYWdlLmZ1bmN0aW9uX2NhbGw7XG4gICAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbFJlc3BvbnNlID0gYXdhaXQgZXhwZXJpbWVudGFsX29uRnVuY3Rpb25DYWxsKFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzUmVmLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb25DYWxsXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGlmIChmdW5jdGlvbkNhbGxSZXNwb25zZSA9PT0gdm9pZCAwKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjaGF0UmVxdWVzdCA9IGZ1bmN0aW9uQ2FsbFJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzdHJlYW1lZFJlc3BvbnNlTWVzc2FnZSA9IG1lc3NhZ2VzQW5kRGF0YU9ySnVzdE1lc3NhZ2U7XG4gICAgICAgICAgaWYgKHN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlLmZ1bmN0aW9uX2NhbGwgPT09IHZvaWQgMCB8fCB0eXBlb2Ygc3RyZWFtZWRSZXNwb25zZU1lc3NhZ2UuZnVuY3Rpb25fY2FsbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bmN0aW9uQ2FsbCA9IHN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlLmZ1bmN0aW9uX2NhbGw7XG4gICAgICAgICAgICBjb25zdCBmdW5jdGlvbkNhbGxSZXNwb25zZSA9IGF3YWl0IGV4cGVyaW1lbnRhbF9vbkZ1bmN0aW9uQ2FsbChcbiAgICAgICAgICAgICAgbWVzc2FnZXNSZWYuY3VycmVudCxcbiAgICAgICAgICAgICAgZnVuY3Rpb25DYWxsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaWYgKGZ1bmN0aW9uQ2FsbFJlc3BvbnNlID09PSB2b2lkIDApXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2hhdFJlcXVlc3QgPSBmdW5jdGlvbkNhbGxSZXNwb25zZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChvbkVycm9yICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgIH1cbiAgICAgIHNldEVycm9yKGVycik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIG11dGF0ZUxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfVxuICBjb25zdCBhcHBlbmQgPSB1c2VDYWxsYmFjayhcbiAgICBhc3luYyAobWVzc2FnZSwgeyBvcHRpb25zLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwgfSA9IHt9KSA9PiB7XG4gICAgICBpZiAoIW1lc3NhZ2UuaWQpIHtcbiAgICAgICAgbWVzc2FnZS5pZCA9IG5hbm9pZCgpO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hhdFJlcXVlc3QgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LmNvbmNhdChtZXNzYWdlKSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgLi4uZnVuY3Rpb25zICE9PSB2b2lkIDAgJiYgeyBmdW5jdGlvbnMgfSxcbiAgICAgICAgLi4uZnVuY3Rpb25fY2FsbCAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25fY2FsbCB9XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRyaWdnZXJSZXF1ZXN0KGNoYXRSZXF1ZXN0KTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF1cbiAgKTtcbiAgY29uc3QgcmVsb2FkID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKHsgb3B0aW9ucywgZnVuY3Rpb25zLCBmdW5jdGlvbl9jYWxsIH0gPSB7fSkgPT4ge1xuICAgICAgaWYgKG1lc3NhZ2VzUmVmLmN1cnJlbnQubGVuZ3RoID09PSAwKVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gbWVzc2FnZXNSZWYuY3VycmVudFttZXNzYWdlc1JlZi5jdXJyZW50Lmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKGxhc3RNZXNzYWdlLnJvbGUgPT09IFwiYXNzaXN0YW50XCIpIHtcbiAgICAgICAgY29uc3QgY2hhdFJlcXVlc3QyID0ge1xuICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LnNsaWNlKDAsIC0xKSxcbiAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgIC4uLmZ1bmN0aW9ucyAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25zIH0sXG4gICAgICAgICAgLi4uZnVuY3Rpb25fY2FsbCAhPT0gdm9pZCAwICYmIHsgZnVuY3Rpb25fY2FsbCB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0cmlnZ2VyUmVxdWVzdChjaGF0UmVxdWVzdDIpO1xuICAgICAgfVxuICAgICAgY29uc3QgY2hhdFJlcXVlc3QgPSB7XG4gICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc1JlZi5jdXJyZW50LFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICAuLi5mdW5jdGlvbnMgIT09IHZvaWQgMCAmJiB7IGZ1bmN0aW9ucyB9LFxuICAgICAgICAuLi5mdW5jdGlvbl9jYWxsICE9PSB2b2lkIDAgJiYgeyBmdW5jdGlvbl9jYWxsIH1cbiAgICAgIH07XG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QoY2hhdFJlcXVlc3QpO1xuICAgIH0sXG4gICAgW3RyaWdnZXJSZXF1ZXN0XVxuICApO1xuICBjb25zdCBzdG9wID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXJSZWYuY3VycmVudCkge1xuICAgICAgYWJvcnRDb250cm9sbGVyUmVmLmN1cnJlbnQuYWJvcnQoKTtcbiAgICAgIGFib3J0Q29udHJvbGxlclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gIH0sIFtdKTtcbiAgY29uc3Qgc2V0TWVzc2FnZXMgPSB1c2VDYWxsYmFjayhcbiAgICAobWVzc2FnZXMyKSA9PiB7XG4gICAgICBtdXRhdGUobWVzc2FnZXMyLCBmYWxzZSk7XG4gICAgICBtZXNzYWdlc1JlZi5jdXJyZW50ID0gbWVzc2FnZXMyO1xuICAgIH0sXG4gICAgW211dGF0ZV1cbiAgKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZShpbml0aWFsSW5wdXQpO1xuICBjb25zdCBoYW5kbGVTdWJtaXQgPSB1c2VDYWxsYmFjayhcbiAgICAoZSwgeyBvcHRpb25zLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwgfSA9IHt9LCBtZXRhZGF0YSkgPT4ge1xuICAgICAgaWYgKG1ldGFkYXRhKSB7XG4gICAgICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgICAgICAuLi5leHRyYU1ldGFkYXRhUmVmLmN1cnJlbnQsXG4gICAgICAgICAgLi4ubWV0YWRhdGFcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmICghaW5wdXQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGFwcGVuZChcbiAgICAgICAge1xuICAgICAgICAgIGNvbnRlbnQ6IGlucHV0LFxuICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgIGNyZWF0ZWRBdDogLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAgeyBvcHRpb25zLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwgfVxuICAgICAgKTtcbiAgICAgIHNldElucHV0KFwiXCIpO1xuICAgIH0sXG4gICAgW2lucHV0LCBhcHBlbmRdXG4gICk7XG4gIGNvbnN0IGhhbmRsZUlucHV0Q2hhbmdlID0gKGUpID0+IHtcbiAgICBzZXRJbnB1dChlLnRhcmdldC52YWx1ZSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgbWVzc2FnZXM6IG1lc3NhZ2VzIHx8IFtdLFxuICAgIGVycm9yLFxuICAgIGFwcGVuZCxcbiAgICByZWxvYWQsXG4gICAgc3RvcCxcbiAgICBzZXRNZXNzYWdlcyxcbiAgICBpbnB1dCxcbiAgICBzZXRJbnB1dCxcbiAgICBoYW5kbGVJbnB1dENoYW5nZSxcbiAgICBoYW5kbGVTdWJtaXQsXG4gICAgaXNMb2FkaW5nLFxuICAgIGRhdGE6IHN0cmVhbURhdGFcbiAgfTtcbn1cblxuLy8gcmVhY3QvdXNlLWNvbXBsZXRpb24udHNcbmltcG9ydCB7IHVzZUNhbGxiYWNrIGFzIHVzZUNhbGxiYWNrMiwgdXNlRWZmZWN0IGFzIHVzZUVmZmVjdDIsIHVzZUlkIGFzIHVzZUlkMiwgdXNlUmVmIGFzIHVzZVJlZjIsIHVzZVN0YXRlIGFzIHVzZVN0YXRlMiB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHVzZVNXUjIgZnJvbSBcInN3clwiO1xuZnVuY3Rpb24gdXNlQ29tcGxldGlvbih7XG4gIGFwaSA9IFwiL2FwaS9jb21wbGV0aW9uXCIsXG4gIGlkLFxuICBpbml0aWFsQ29tcGxldGlvbiA9IFwiXCIsXG4gIGluaXRpYWxJbnB1dCA9IFwiXCIsXG4gIGNyZWRlbnRpYWxzLFxuICBoZWFkZXJzLFxuICBib2R5LFxuICBvblJlc3BvbnNlLFxuICBvbkZpbmlzaCxcbiAgb25FcnJvclxufSA9IHt9KSB7XG4gIGNvbnN0IGhvb2tJZCA9IHVzZUlkMigpO1xuICBjb25zdCBjb21wbGV0aW9uSWQgPSBpZCB8fCBob29rSWQ7XG4gIGNvbnN0IHsgZGF0YSwgbXV0YXRlIH0gPSB1c2VTV1IyKFthcGksIGNvbXBsZXRpb25JZF0sIG51bGwsIHtcbiAgICBmYWxsYmFja0RhdGE6IGluaXRpYWxDb21wbGV0aW9uXG4gIH0pO1xuICBjb25zdCB7IGRhdGE6IGlzTG9hZGluZyA9IGZhbHNlLCBtdXRhdGU6IG11dGF0ZUxvYWRpbmcgfSA9IHVzZVNXUjIoXG4gICAgW2NvbXBsZXRpb25JZCwgXCJsb2FkaW5nXCJdLFxuICAgIG51bGxcbiAgKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTIodm9pZCAwKTtcbiAgY29uc3QgY29tcGxldGlvbiA9IGRhdGE7XG4gIGNvbnN0IFthYm9ydENvbnRyb2xsZXIsIHNldEFib3J0Q29udHJvbGxlcl0gPSB1c2VTdGF0ZTIobnVsbCk7XG4gIGNvbnN0IGV4dHJhTWV0YWRhdGFSZWYgPSB1c2VSZWYyKHtcbiAgICBjcmVkZW50aWFscyxcbiAgICBoZWFkZXJzLFxuICAgIGJvZHlcbiAgfSk7XG4gIHVzZUVmZmVjdDIoKCkgPT4ge1xuICAgIGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudCA9IHtcbiAgICAgIGNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVycyxcbiAgICAgIGJvZHlcbiAgICB9O1xuICB9LCBbY3JlZGVudGlhbHMsIGhlYWRlcnMsIGJvZHldKTtcbiAgYXN5bmMgZnVuY3Rpb24gdHJpZ2dlclJlcXVlc3QocHJvbXB0LCBvcHRpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIG11dGF0ZUxvYWRpbmcodHJ1ZSk7XG4gICAgICBjb25zdCBhYm9ydENvbnRyb2xsZXIyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgc2V0QWJvcnRDb250cm9sbGVyKGFib3J0Q29udHJvbGxlcjIpO1xuICAgICAgbXV0YXRlKFwiXCIsIGZhbHNlKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGFwaSwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgcHJvbXB0LFxuICAgICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5ib2R5LFxuICAgICAgICAgIC4uLm9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuYm9keVxuICAgICAgICB9KSxcbiAgICAgICAgY3JlZGVudGlhbHM6IGV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5jcmVkZW50aWFscyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIC4uLmV4dHJhTWV0YWRhdGFSZWYuY3VycmVudC5oZWFkZXJzLFxuICAgICAgICAgIC4uLm9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaGVhZGVyc1xuICAgICAgICB9LFxuICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlcjIuc2lnbmFsXG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIHRocm93IGVycjtcbiAgICAgIH0pO1xuICAgICAgaWYgKG9uUmVzcG9uc2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCBvblJlc3BvbnNlKHJlcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGF3YWl0IHJlcy50ZXh0KCkgfHwgXCJGYWlsZWQgdG8gZmV0Y2ggdGhlIGNoYXQgcmVzcG9uc2UuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICghcmVzLmJvZHkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJlc3BvbnNlIGJvZHkgaXMgZW1wdHkuXCIpO1xuICAgICAgfVxuICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgICBjb25zdCByZWFkZXIgPSByZXMuYm9keS5nZXRSZWFkZXIoKTtcbiAgICAgIGNvbnN0IGRlY29kZXIgPSBjcmVhdGVDaHVua0RlY29kZXIoKTtcbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9IGRlY29kZXIodmFsdWUpO1xuICAgICAgICBtdXRhdGUocmVzdWx0LCBmYWxzZSk7XG4gICAgICAgIGlmIChhYm9ydENvbnRyb2xsZXIyID09PSBudWxsKSB7XG4gICAgICAgICAgcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob25GaW5pc2gpIHtcbiAgICAgICAgb25GaW5pc2gocHJvbXB0LCByZXN1bHQpO1xuICAgICAgfVxuICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJBYm9ydEVycm9yXCIpIHtcbiAgICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBpZiAob25FcnJvcikge1xuICAgICAgICAgIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2V0RXJyb3IoZXJyKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgbXV0YXRlTG9hZGluZyhmYWxzZSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHN0b3AgPSB1c2VDYWxsYmFjazIoKCkgPT4ge1xuICAgIGlmIChhYm9ydENvbnRyb2xsZXIpIHtcbiAgICAgIGFib3J0Q29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2V0QWJvcnRDb250cm9sbGVyKG51bGwpO1xuICAgIH1cbiAgfSwgW2Fib3J0Q29udHJvbGxlcl0pO1xuICBjb25zdCBzZXRDb21wbGV0aW9uID0gdXNlQ2FsbGJhY2syKFxuICAgIChjb21wbGV0aW9uMikgPT4ge1xuICAgICAgbXV0YXRlKGNvbXBsZXRpb24yLCBmYWxzZSk7XG4gICAgfSxcbiAgICBbbXV0YXRlXVxuICApO1xuICBjb25zdCBjb21wbGV0ZSA9IHVzZUNhbGxiYWNrMihcbiAgICBhc3luYyAocHJvbXB0LCBvcHRpb25zKSA9PiB7XG4gICAgICByZXR1cm4gdHJpZ2dlclJlcXVlc3QocHJvbXB0LCBvcHRpb25zKTtcbiAgICB9LFxuICAgIFt0cmlnZ2VyUmVxdWVzdF1cbiAgKTtcbiAgY29uc3QgW2lucHV0LCBzZXRJbnB1dF0gPSB1c2VTdGF0ZTIoaW5pdGlhbElucHV0KTtcbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gdXNlQ2FsbGJhY2syKFxuICAgIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoIWlucHV0KVxuICAgICAgICByZXR1cm47XG4gICAgICByZXR1cm4gY29tcGxldGUoaW5wdXQpO1xuICAgIH0sXG4gICAgW2lucHV0LCBjb21wbGV0ZV1cbiAgKTtcbiAgY29uc3QgaGFuZGxlSW5wdXRDaGFuZ2UgPSAoZSkgPT4ge1xuICAgIHNldElucHV0KGUudGFyZ2V0LnZhbHVlKTtcbiAgfTtcbiAgcmV0dXJuIHtcbiAgICBjb21wbGV0aW9uLFxuICAgIGNvbXBsZXRlLFxuICAgIGVycm9yLFxuICAgIHNldENvbXBsZXRpb24sXG4gICAgc3RvcCxcbiAgICBpbnB1dCxcbiAgICBzZXRJbnB1dCxcbiAgICBoYW5kbGVJbnB1dENoYW5nZSxcbiAgICBoYW5kbGVTdWJtaXQsXG4gICAgaXNMb2FkaW5nXG4gIH07XG59XG5leHBvcnQge1xuICB1c2VDaGF0LFxuICB1c2VDb21wbGV0aW9uXG59O1xuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlRWZmZWN0IiwidXNlSWQiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZVNXUiIsImN1c3RvbUFscGhhYmV0IiwibmFub2lkIiwiY3JlYXRlQ2h1bmtEZWNvZGVyIiwiY29tcGxleCIsImRlY29kZXIiLCJUZXh0RGVjb2RlciIsImNodW5rIiwiZGVjb2RlIiwic3RyZWFtIiwiZGVjb2RlZCIsInNwbGl0IiwibWFwIiwiZ2V0U3RyZWFtU3RyaW5nVHlwZUFuZFZhbHVlIiwiZmlsdGVyIiwiQm9vbGVhbiIsIlN0cmVhbVN0cmluZ1ByZWZpeGVzIiwidGV4dCIsImZ1bmN0aW9uX2NhbGwiLCJkYXRhIiwibGluZSIsImZpcnN0U2VwZXJhdG9ySW5kZXgiLCJpbmRleE9mIiwicHJlZml4Iiwic2xpY2UiLCJ0eXBlIiwiT2JqZWN0Iiwia2V5cyIsImZpbmQiLCJrZXkiLCJOdW1iZXIiLCJ2YWwiLCJwYXJzZWRWYWwiLCJ2YWx1ZSIsIkpTT04iLCJwYXJzZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJDT01QTEVYX0hFQURFUiIsImdldFN0cmVhbWVkUmVzcG9uc2UiLCJhcGkiLCJjaGF0UmVxdWVzdCIsIm11dGF0ZSIsIm11dGF0ZVN0cmVhbURhdGEiLCJleGlzdGluZ0RhdGEiLCJleHRyYU1ldGFkYXRhUmVmIiwibWVzc2FnZXNSZWYiLCJhYm9ydENvbnRyb2xsZXJSZWYiLCJvbkZpbmlzaCIsIm9uUmVzcG9uc2UiLCJzZW5kRXh0cmFNZXNzYWdlRmllbGRzIiwiX2EiLCJfYiIsInByZXZpb3VzTWVzc2FnZXMiLCJjdXJyZW50IiwibWVzc2FnZXMiLCJyZXMiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJzdHJpbmdpZnkiLCJyb2xlIiwiY29udGVudCIsIm5hbWUiLCJvcHRpb25zIiwiZnVuY3Rpb25zIiwiY3JlZGVudGlhbHMiLCJoZWFkZXJzIiwic2lnbmFsIiwiY2F0Y2giLCJlcnIiLCJvayIsIkVycm9yIiwiaXNDb21wbGV4TW9kZSIsImdldCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJyZWFkZXIiLCJnZXRSZWFkZXIiLCJyZXNwb25zZU1lc3NhZ2VzIiwic3RyZWFtZWRSZXNwb25zZSIsInJlcGx5SWQiLCJyZXNwb25zZU1lc3NhZ2UiLCJpZCIsInJlc3BvbnNlRGF0YSIsInByZWZpeE1hcCIsImRvbmUiLCJyZWFkIiwibGluZXMiLCJ2YWx1ZTIiLCJwYXJzZWRWYWx1ZSIsInJlc3BvbnNlTWVzc2FnZTIiLCJmdW5jdGlvbkNhbGwiLCJmdW5jdGlvbkNhbGxNZXNzYWdlIiwicGFyc2VkRnVuY3Rpb25DYWxsIiwibWVyZ2VkIiwiY2FuY2VsIiwiaXRlbSIsImVudHJpZXMiLCJwdXNoIiwic3RhcnRzV2l0aCIsInVzZUNoYXQiLCJpbml0aWFsTWVzc2FnZXMiLCJpbml0aWFsSW5wdXQiLCJleHBlcmltZW50YWxfb25GdW5jdGlvbkNhbGwiLCJvbkVycm9yIiwiaG9va0lkIiwiY2hhdElkIiwiZmFsbGJhY2tEYXRhIiwiaXNMb2FkaW5nIiwibXV0YXRlTG9hZGluZyIsInN0cmVhbURhdGEiLCJzZXRFcnJvciIsInRyaWdnZXJSZXF1ZXN0IiwiYWJvcnRDb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwibWVzc2FnZXNBbmREYXRhT3JKdXN0TWVzc2FnZSIsIm1lc3NhZ2UiLCJmdW5jdGlvbkNhbGxSZXNwb25zZSIsInN0cmVhbWVkUmVzcG9uc2VNZXNzYWdlIiwiYXBwZW5kIiwiY29uY2F0IiwicmVsb2FkIiwibGVuZ3RoIiwibGFzdE1lc3NhZ2UiLCJjaGF0UmVxdWVzdDIiLCJzdG9wIiwiYWJvcnQiLCJzZXRNZXNzYWdlcyIsIm1lc3NhZ2VzMiIsImlucHV0Iiwic2V0SW5wdXQiLCJoYW5kbGVTdWJtaXQiLCJtZXRhZGF0YSIsInByZXZlbnREZWZhdWx0IiwiaGFuZGxlSW5wdXRDaGFuZ2UiLCJ0YXJnZXQiLCJ1c2VDYWxsYmFjazIiLCJ1c2VFZmZlY3QyIiwidXNlSWQyIiwidXNlUmVmMiIsInVzZVN0YXRlMiIsInVzZVNXUjIiLCJ1c2VDb21wbGV0aW9uIiwiaW5pdGlhbENvbXBsZXRpb24iLCJjb21wbGV0aW9uSWQiLCJjb21wbGV0aW9uIiwic2V0QWJvcnRDb250cm9sbGVyIiwicHJvbXB0IiwiYWJvcnRDb250cm9sbGVyMiIsInJlc3VsdCIsInNldENvbXBsZXRpb24iLCJjb21wbGV0aW9uMiIsImNvbXBsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/ai-stream-experimental/react/dist/index.mjs\n");

/***/ })

};
;